{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{32:function(t,e,n){\"use strict\";n.d(e,\"e\",function(){return v}),n.d(e,\"d\",function(){return b}),n.d(e,\"c\",function(){return d}),n.d(e,\"a\",function(){return m}),n.d(e,\"f\",function(){return w}),n.d(e,\"b\",function(){return g});var r=n(5),o=n.n(r),a=n(41),u=n.n(a),c=n(38),i=n.n(c),s=n(51);function f(t,e,n,r,o,a,u){try{var c=t[a](u),i=c.value}catch(t){return void n(t)}c.done?e(i):Promise.resolve(i).then(r,o)}function p(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function u(t){f(a,r,o,u,c,\"next\",t)}function c(t){f(a,r,o,u,c,\"throw\",t)}u(void 0)})}}var l=u.a.create({baseURL:\"\".concat(\"https://allisonzhang.herokuapp.com\",\"/api/v1\"),timeout:3e3}),h=function(t){var e=t?Object(s.a)(t,\"jwt\"):i.a.getJSON(\"jwt\");if(e)return{headers:{authorization:\"Bearer \".concat(e)}}},y=function(t){var e={};return e=t&&t.response&&t.response.data?t.response.data:t,Promise.reject(e)},v=function(){var t=p(o.a.mark(function t(e){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return\"/secret\",t.next=3,l.get(\"/secret\",h(e)).then(function(t){return t.data});case 3:return t.abrupt(\"return\",t.sent);case 4:case\"end\":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),b=function(){var t=p(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.get(\"/portfolios\").then(function(t){return t.data});case 2:return t.abrupt(\"return\",t.sent);case 3:case\"end\":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),d=function(){var t=p(o.a.mark(function t(e,n){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.get(\"/portfolios/\".concat(e)).then(function(t){return t.data});case 2:return t.abrupt(\"return\",t.sent);case 3:case\"end\":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}(),m=function(){var t=p(o.a.mark(function t(e){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.post(\"/portfolios\",e,h()).then(function(t){return t.data}).catch(function(t){return y(t)});case 2:return t.abrupt(\"return\",t.sent);case 3:case\"end\":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),w=function(){var t=p(o.a.mark(function t(e){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.patch(\"/portfolios/\".concat(e._id),e,h()).then(function(t){return t.data}).catch(function(t){return y(t)});case 2:return t.abrupt(\"return\",t.sent);case 3:case\"end\":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),g=function(t){return l.delete(\"/portfolios/\".concat(t),h()).then(function(t){return t.data})}},45:function(t,e,n){\"use strict\";var r=n(5),o=n.n(r),a=n(1),u=n.n(a),c=n(14),i=n(15);function s(t){return(s=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function f(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);\"function\"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){p(t,e,n[e])})}return t}function p(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(t,e,n,r,o,a,u){try{var c=t[a](u),i=c.value}catch(t){return void n(t)}c.done?e(i):Promise.resolve(i).then(r,o)}function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function y(t,e){return!e||\"object\"!==s(e)&&\"function\"!=typeof e?function(t){if(void 0===t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return t}(t):e}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function b(t,e){return(b=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}e.a=function(t){return function(e){return function(n){function r(){return function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,r),y(this,v(r).apply(this,arguments))}var a,s,p;return function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&b(t,e)}(r,u.a.Component),a=r,s=[{key:\"renderProtectedPage\",value:function(){var n=this.props.auth,r=n.isAuthenticated,o=n.user,a=o&&o[\"\".concat(\"https://allisonzhang.herokuapp.com\",\"/role\")],s=!1;return t?a&&a===t&&(s=!0):s=!0,r?s?u.a.createElement(e,this.props):u.a.createElement(c.a,this.props.auth,u.a.createElement(i.a,null,u.a.createElement(\"h1\",null,\"You are not authorized. You don't have permission to visit this page. \"))):u.a.createElement(c.a,this.props.auth,u.a.createElement(i.a,null,u.a.createElement(\"h1\",null,\"You are not authenticated. Please login to access this page. \")))}},{key:\"render\",value:function(){return this.renderProtectedPage()}}],p=[{key:\"getInitialProps\",value:function(){var t,n=(t=o.a.mark(function t(n){var r;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getInitialProps;case 2:if(t.t0=t.sent,!t.t0){t.next=7;break}return t.next=6,e.getInitialProps(n);case 6:t.t0=t.sent;case 7:return r=t.t0,t.abrupt(\"return\",f({},r));case 9:case\"end\":return t.stop()}},t,this)}),function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function u(t){l(a,r,o,u,c,\"next\",t)}function c(t){l(a,r,o,u,c,\"throw\",t)}u(void 0)})});return function(t){return n.apply(this,arguments)}}()}],s&&h(a.prototype,s),p&&h(a,p),r}()}}},661:function(t,e,n){__NEXT_REGISTER_PAGE(\"/secret\",function(){return t.exports=n(662),{page:t.exports.default}})},662:function(t,e,n){\"use strict\";n.r(e);var r=n(5),o=n.n(r),a=n(1),u=n.n(a),c=n(14),i=n(15),s=n(45),f=n(32);function p(t){return(p=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function l(t,e,n,r,o,a,u){try{var c=t[a](u),i=c.value}catch(t){return void n(t)}c.done?e(i):Promise.resolve(i).then(r,o)}function h(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function u(t){l(a,r,o,u,c,\"next\",t)}function c(t){l(a,r,o,u,c,\"throw\",t)}u(void 0)})}}function y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function b(t,e){return(b=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function d(t){if(void 0===t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return t}var m=function(t){function e(){var t,n,r,o,a,u,c;!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,e);for(var i=arguments.length,s=new Array(i),f=0;f<i;f++)s[f]=arguments[f];return r=this,n=!(o=(t=v(e)).call.apply(t,[this].concat(s)))||\"object\"!==p(o)&&\"function\"!=typeof o?d(r):o,a=d(d(n)),c={secretData:[]},(u=\"state\")in a?Object.defineProperty(a,u,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[u]=c,n}var n,r,s;return function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&b(t,e)}(e,a[\"Component\"]),n=e,r=[{key:\"componentDidMount\",value:function(){var t=h(o.a.mark(function t(){var e;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(f.e)();case 2:e=t.sent,this.setState({secretData:e});case 4:case\"end\":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:\"displaySecretData\",value:function(){var t=this.state.secretData;return t&&t.length>0?t.map(function(t,e){return u.a.createElement(\"div\",{key:e},u.a.createElement(\"p\",null,\" \",t.title,\" \"),u.a.createElement(\"p\",null,\" \",t.description,\" \"))}):null}},{key:\"render\",value:function(){var t=this.props.superSecretValue;return u.a.createElement(c.a,this.props.auth,u.a.createElement(i.a,null,u.a.createElement(\"h1\",null,\"Secret Page\"),u.a.createElement(\"h2\",null,\" \",t,\" \"),this.displaySecretData()))}}],s=[{key:\"getInitialProps\",value:function(){var t=h(o.a.mark(function t(e){var n,r;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.req,t.next=3,Object(f.e)(n);case 3:return r=t.sent,t.abrupt(\"return\",{secretValue:r});case 5:case\"end\":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}],r&&y(n.prototype,r),s&&y(n,s),e}();e.default=Object(s.a)()(m)}},[[661,1,0]]]);","extractedComments":[]}